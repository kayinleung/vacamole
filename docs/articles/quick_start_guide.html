<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quick start guide for vacamole • vacamole</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Quick start guide for vacamole">
<meta property="og:description" content="vacamole">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vacamole</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/quick_start_guide.html">Quick start guide for vacamole</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="quick_start_guide_files/header-attrs-2.11/header-attrs.js"></script><script src="quick_start_guide_files/kePrint-0.0.1/kePrint.js"></script><link href="quick_start_guide_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Quick start guide for vacamole</h1>
            
      
      
      <div class="hidden name"><code>quick_start_guide.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p><code>vacamole</code> is an R package that features a deterministic age-structured compartmental susceptible-exposed-infectious-recovered (SEIR) model and supporting functions. The model was developed to determine the impacts of different COVID-19 vaccination strategies on disease outcomes; therefore the model is an extended SEIR model to include states for severe disease outcomes and vaccination status.</p>
<p>Note: this package and vignette are still under development.</p>
<div id="model-description" class="section level3">
<h3 class="hasAnchor">
<a href="#model-description" class="anchor"></a>Model description</h3>
<p>The model is a deterministic compartmental SEIR model. The population is partitioned into nine 10-year age groups (0-9, 10-19, …, 70-79, 80+). Within each age group we further partition the population into those who are unvaccinated, vaccinated with 1 dose, or vaccinated with 2 doses and then finally into disease states: susceptible (S), infected but not yet infectious (E), infectious (I), hospitalized (H), in intensive care (IC), return to the hospital ward after intensive care (HIC), recovered (R), and dead (D) (Figure 1).</p>
<div class="figure">
<img src="model_diagram.png" alt=""><p class="caption">Figure 1. Basic conceptual model diagram. This diagram does not include the additional states after the second dose of vaccination or the age structure in the model. S = susceptible, E = exposed, I = Infectious, R = Recovered, H = hospitalized, IC = In intensive care, HIC = return to the hospital ward following treatment in IC, Su = vaccinated, but not yet protected, D = dead. States with subscript V indicate individuals who are vaccinated and protected by vaccination. This model assumes the “leaky” vaccine protection, so vaccinated and protected individuals can still be infected, hospitalized, etc. but at a reduced rate.</p>
</div>
<p>We assume that individuals who recover from infection cannot be re-infected. When a person is vaccinated, they first enter a hold state where they are vaccinated, but not yet (fully) protected (Shold1d or Shold2d). After a delay period, they enter the vaccinated and protected state for the dose they have received (Sv1d or Sv2d). We assume that vaccination only affects susceptible individuals.</p>
<p>The model is designed to incorporate a single vaccine product with a 2-dose regimen that 1) reduces susceptibility to infection, 2) reduces risk of hospitalization if a vaccinated individual is infected, and 3) reduces risk of infecting others (transmission) if a vaccinated person is infected. The vaccine is assumed to provide “leaky” protection, which means that the vaccine reduces the probability of transitioning between states for each vaccinated person. For example, a vaccine with 70% effectiveness against infection after the first dose would reduce the probability of transitioning from Sv1d to Ev1d by 70% compared to someone who is unvaccinated (moving from the S compartment to the E compartment). However, since there is more than one vaccine product currently licensed for use against COVID-19, we incorporate different vaccine products by taking the daily weighted average of the number of people with each vaccine product (and dose), the corresponding delay to protection of each vaccine product, and the vaccine effectiveness against each outcome. Rate of vaccination for each day, vaccine product, and dose for each age group are model inputs.</p>
</div>
</div>
<div id="vignette-outline" class="section level2">
<h2 class="hasAnchor">
<a href="#vignette-outline" class="anchor"></a>Vignette Outline</h2>
<p>This quick start guide is designed to provide the basic instructions to use <code>vacamole</code>. The following steps are covered in this guide:</p>
<ol style="list-style-type: decimal">
<li>Installing vacamole</li>
<li>Data sources</li>
<li>Specifying inputs</li>
<li>Running the model</li>
</ol>
</div>
<div id="install-vacamole" class="section level1">
<h1 class="hasAnchor">
<a href="#install-vacamole" class="anchor"></a>1. Install vacamole</h1>
<p>The easiest way to install the development version of <code>vacamole</code> is to use the <code>devtools</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"kylieainslie/vacamole"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; rlang (0.4.11 -&gt; 0.4.12) [CRAN]</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; cli   (3.0.1  -&gt; 3.1.0 ) [CRAN]</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   There are binary versions available but the source versions are later:</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       binary source needs_compilation</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; rlang 0.4.11 0.4.12              TRUE</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; cli    3.0.1  3.1.0              TRUE</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   </span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>   checking <span class="cf">for</span> file <span class="st">'C:\Users</span><span class="sc">\a</span><span class="st">insliek\AppData\Local\Temp\RtmpgxUMB7</span><span class="sc">\r</span><span class="st">emotes59705a31534e\kylieainslie-vacamole-89e0bdc/DESCRIPTION'</span> ...</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>v  checking <span class="cf">for</span> file <span class="st">'C:\Users</span><span class="sc">\a</span><span class="st">insliek\AppData\Local\Temp\RtmpgxUMB7</span><span class="sc">\r</span><span class="st">emotes59705a31534e\kylieainslie-vacamole-89e0bdc/DESCRIPTION'</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span>  preparing <span class="st">'vacamole'</span><span class="sc">:</span> (693ms)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    checking DESCRIPTION meta-information ...</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>   checking DESCRIPTION meta<span class="sc">-</span>information ... </span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>v  checking DESCRIPTION meta<span class="sc">-</span>information</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span>  checking <span class="cf">for</span> LF line<span class="sc">-</span>endings <span class="cf">in</span> source and make files and shell scripts</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span>  checking <span class="cf">for</span> empty or unneeded directories</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>   Omitted <span class="st">'LazyData'</span> from DESCRIPTION</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span>  building <span class="st">'vacamole_1.0.tar.gz'</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vacamole)</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Load other packages</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span></code></pre></div>
</div>
<div id="data-sources" class="section level1">
<h1 class="hasAnchor">
<a href="#data-sources" class="anchor"></a>2. Data sources</h1>
<p><code>vacamole</code> contains several example data sets in the <code>data/</code>and <code>inputs/</code> directories that can be used to run through the package functions. The example data sets include 1. Daily confirmed cases of COVID-19 from the Dutch national notification database Osiris from 1 January 2020 to 22 June 2021 <a href="https://geodata.rivm.nl/covid-19/">RIVM Open Data</a>. 2. Synthetic vaccination distribution schedule. 3. Contact matrices from the <a href="https://www.rivm.nl/pienter-corona-studie">Pienter Corona study</a> prior to the COVID-19 pandemic and in April 2020, June 2020, September 2020, February 2021, and June 2021.</p>
</div>
<div id="specifying-inputs" class="section level1">
<h1 class="hasAnchor">
<a href="#specifying-inputs" class="anchor"></a>3. Specifying inputs</h1>
<code>vacamole</code> expects several inputs namely, a named list of parameters for the initial number of individuals in each compartment, the rate of transitioning between states, contact matrices, and vaccination schedule. The following section will walk the users through creating each of these inputs. Some inputs values are stored in the <code>inputs</code> directory. A table of the required inputs is shown in Table 1. ## Vaccination schedule A synthetic vaccination schedule is provided in the <code>inputs</code> directory. The vaccine schedule should have columns for each vaccine type and dose by age group. The rows should be the proportion of each age group vaccinated with the vaccine dose and type per time period (usually day). The model expects four different vaccine types. For single dose vaccine regimens, the columns for the second dose are set to zero.
<table class="table table">
<thead><tr>
<th style="text-align:left;">
date
</th>
<th style="text-align:right;">
pf_d1_1
</th>
<th style="text-align:left;">
pf_d1_2
</th>
<th style="text-align:left;">
pf_d1_3
</th>
<th style="text-align:left;">
pf_d1_4
</th>
<th style="text-align:left;">
pf_d1_5
</th>
<th style="text-align:left;">
pf_d1_6
</th>
<th style="text-align:left;">
pf_d1_7
</th>
<th style="text-align:left;">
pf_d1_8
</th>
<th style="text-align:left;">
pf_d1_9
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
2020-01-01
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-01-02
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-01-03
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-01-04
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-01-05
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-01-06
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-01-07
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0.1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-01-08
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-01-09
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0.3
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-01-10
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0.4
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-01-11
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0.5
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-01-12
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0.6
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-01-13
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0.7
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-01-14
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0.05
</td>
<td style="text-align:left;">
0.75
</td>
</tr>
</tbody>
</table>
<p>The vaccination schedule needs to be converted before input into the model. The vaccination schedule data frame is converted into a list with weighted averages of the following quantities: vaccination rate, vaccine effectiveness, and delay to protection based on the number of people in the population who receive each dose and type of vaccine at each time point.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># read in vaccination schedule</span>
<span class="va">vac_schedule</span> <span class="op">&lt;-</span> <span class="fu">read_xlsx</span><span class="op">(</span><span class="st">"../inst/extdata/inputs/vac_schedule_18plus_synth.xlsx"</span>, col_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"date"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"numeric"</span>, <span class="fl">80</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"X"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># read in vaccine effectiveness parameters</span>
<span class="co"># these will be used when converting the vaccine schedule into weighted vaccine effectiveness, delay to protection, and vaccination rate</span>
<span class="va">ve_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="st">"../inst/extdata/inputs/ve_params.rds"</span><span class="op">)</span>

<span class="co"># convert vaccination schedule</span>
<span class="co"># the vaccination schedule is assumed to be cumulative over time</span>
<span class="va">vac_schedule1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convert_vac_schedule.html">convert_vac_schedule</a></span><span class="op">(</span>
  vac_schedule <span class="op">=</span> <span class="va">vac_schedule</span>,
  ve <span class="op">=</span> <span class="va">ve_info</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,
  delay <span class="op">=</span> <span class="va">ve_info</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>,
  hosp_multiplier <span class="op">=</span> <span class="va">ve_info</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>,
  ve_trans <span class="op">=</span> <span class="va">ve_info</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span>
<span class="op">)</span></code></pre></div>
<div id="parameter-values" class="section level2">
<h2 class="hasAnchor">
<a href="#parameter-values" class="anchor"></a>Parameter values</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># read in transition rates</span>
<span class="va">transition_rates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="st">"../inst/extdata/inputs/transition_rates.rds"</span><span class="op">)</span>

<span class="co"># read in transmission matrix</span>
<span class="va">april_2017</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="st">"../inst/extdata/inputs/contact_matrices/converted/transmission_matrix_april_2017.rds"</span><span class="op">)</span>

<span class="co"># define population size (by age group)</span>
<span class="va">age_dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.10319920</span>, <span class="fl">0.11620856</span>, <span class="fl">0.12740219</span>, <span class="fl">0.12198707</span>,     <span class="fl">0.13083463</span>,<span class="fl">0.14514332</span>, <span class="fl">0.12092904</span>, <span class="fl">0.08807406</span>, <span class="fl">0.04622194</span><span class="op">)</span>
<span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">17407585</span> <span class="co"># Dutch population size</span>
<span class="va">n_vec</span> <span class="op">&lt;-</span> <span class="va">n</span> <span class="op">*</span> <span class="va">age_dist</span>

<span class="co"># create named list of parameter</span>
<span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>beta <span class="op">=</span> <span class="fl">0.0004</span>,
               beta1 <span class="op">=</span> <span class="fl">0.14</span>,
               gamma <span class="op">=</span> <span class="fl">0.5</span>,
               sigma <span class="op">=</span> <span class="fl">0.5</span>,
               epsilon <span class="op">=</span> <span class="fl">0.01</span>,
               N <span class="op">=</span> <span class="va">n_vec</span>,
               h <span class="op">=</span> <span class="va">transition_rates</span><span class="op">$</span><span class="va">h</span>,
               i1 <span class="op">=</span> <span class="va">transition_rates</span><span class="op">$</span><span class="va">i1</span>,
               i2 <span class="op">=</span> <span class="va">transition_rates</span><span class="op">$</span><span class="va">i2</span>,
               d <span class="op">=</span> <span class="va">transition_rates</span><span class="op">$</span><span class="va">d</span>, 
               d_ic <span class="op">=</span> <span class="va">transition_rates</span><span class="op">$</span><span class="va">d_ic</span>,
               d_hic <span class="op">=</span> <span class="va">transition_rates</span><span class="op">$</span><span class="va">d_hic</span>,
               r <span class="op">=</span> <span class="va">transition_rates</span><span class="op">$</span><span class="va">r</span>,
               r_ic <span class="op">=</span> <span class="va">transition_rates</span><span class="op">$</span><span class="va">r_ic</span>,
               p_report <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>,
               c_start <span class="op">=</span> <span class="va">april_2017</span>,
               keep_cm_fixed <span class="op">=</span> <span class="cn">TRUE</span>,
               vac_inputs <span class="op">=</span> <span class="va">vac_schedule1</span>,
               use_cases <span class="op">=</span> <span class="cn">TRUE</span>,  
               no_vac <span class="op">=</span> <span class="cn">FALSE</span>,
               t_calendar_start <span class="op">=</span> <span class="fu">yday</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2020-01-01"</span><span class="op">)</span><span class="op">)</span>, 
               beta_change <span class="op">=</span> <span class="cn">NULL</span> 
<span class="op">)</span></code></pre></div>
</div>
<div id="initial-conditions" class="section level2">
<h2 class="hasAnchor">
<a href="#initial-conditions" class="anchor"></a>Initial conditions</h2>
<p>The model is partitioned into nine age groups, so users need to supply the initial number of individuals in each age group for each compartment. The initial conditions should be a named list. Below we start with a fully susceptible population and one infectious person.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Specify initial conditions ---------------------------------</span>
<span class="va">empty_state</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span> <span class="co"># vector of zeros</span>

<span class="va">init</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  t <span class="op">=</span> <span class="fl">0</span>,
  S <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">n_vec</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, <span class="va">n_vec</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span><span class="op">-</span><span class="fl">1</span>, <span class="va">n_vec</span><span class="op">[</span><span class="fl">6</span><span class="op">:</span><span class="fl">9</span><span class="op">]</span><span class="op">)</span>,
  Shold_1d <span class="op">=</span> <span class="va">empty_state</span>,
  Sv_1d <span class="op">=</span> <span class="va">empty_state</span>,
  Shold_2d <span class="op">=</span> <span class="va">empty_state</span>,
  Sv_2d <span class="op">=</span> <span class="va">empty_state</span>,
  E <span class="op">=</span> <span class="va">empty_state</span>,
  Ev_1d <span class="op">=</span> <span class="va">empty_state</span>,
  Ev_2d <span class="op">=</span> <span class="va">empty_state</span>,
  I <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">4</span><span class="op">)</span>,<span class="fl">1</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">4</span><span class="op">)</span><span class="op">)</span>,
  Iv_1d <span class="op">=</span> <span class="va">empty_state</span>,
  Iv_2d <span class="op">=</span> <span class="va">empty_state</span>,
  H <span class="op">=</span> <span class="va">empty_state</span>,
  Hv_1d <span class="op">=</span> <span class="va">empty_state</span>,
  Hv_2d <span class="op">=</span> <span class="va">empty_state</span>,
  H_IC <span class="op">=</span> <span class="va">empty_state</span>,
  H_ICv_1d <span class="op">=</span> <span class="va">empty_state</span>,
  H_ICv_2d <span class="op">=</span> <span class="va">empty_state</span>,
  IC <span class="op">=</span> <span class="va">empty_state</span>,
  ICv_1d <span class="op">=</span> <span class="va">empty_state</span>,
  ICv_2d <span class="op">=</span> <span class="va">empty_state</span>,
  D <span class="op">=</span> <span class="va">empty_state</span>,
  R <span class="op">=</span> <span class="va">empty_state</span>,
  Rv_1d <span class="op">=</span> <span class="va">empty_state</span>,
  Rv_2d <span class="op">=</span> <span class="va">empty_state</span>
<span class="op">)</span>

<span class="co"># create vector of time points</span>
<span class="va">times</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">vac_schedule</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="run-model" class="section level1">
<h1 class="hasAnchor">
<a href="#run-model" class="anchor"></a>3. Run model</h1>
<p>The model is coded as a system of ordinary differential equations that are numerically solved using the <code>lsoda</code> function in the <code>deSolve</code> package.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Solve model ------------------------------------------------------</span>
<span class="va">seir_out</span> <span class="op">&lt;-</span> <span class="fu">lsoda</span><span class="op">(</span><span class="va">init</span>,                 <span class="co"># initial conditions</span>
                  <span class="va">times</span>,                <span class="co"># time vector</span>
                  <span class="va">age_struct_seir_ode</span>,  <span class="co"># model function</span>
                  <span class="va">params</span><span class="op">)</span>               <span class="co"># parameters</span>

<span class="co"># post-process the model output ------------------------------------</span>
<span class="va">seir_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">seir_out</span><span class="op">)</span>
<span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/postprocess_age_struct_model_output.html">postprocess_age_struct_model_output</a></span><span class="op">(</span><span class="va">seir_out</span><span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Kylie Ainslie.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
